<div class="container">
  <div class="row">
    <div class="col-11 text-center mt-5 mx-auto">
      <% @entries.each do |e| %>
        <% if @myUserId != e.user.id %>
            <h2 class="chats-title text-light"><%= e.user.name %>さんとのトークルーム</h2>
        <% end %>
      <% end %>
    </div>

    <div class="chats col-10 mx-auto overflow-auto bottom-overflow">
      <% if @messages.present? %>
        <% @messages.reverse_each do |m| %>
          <% if @myUserId == m.user.id  %>
            <div class="row my-3 justify-content-end">
              <div class="my-auto">
                <%= m.created_at.strftime('%H:%M') %>
              </div>
              <div class="sendmessage my-auto mx-2">
                <%= m.message %>
              </div>
              <div class="image">
                <%= image_tag m.user.get_profile_image(80, 80), class: "rounded-circle mx-3" %>
              </div>
            </div>
          <% else %>
            <div class="row my-3">
              <div class="image">
                <%= image_tag m.user.get_profile_image(80, 80), class: "rounded-circle mx-3" %>
              </div>
              <div class="message my-auto">
                <%= m.message %>
              </div>
              <div class="my-auto mx-2">
                <%= m.created_at.strftime('%H:%M') %>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <div class="col-12 text-center">
      <%= form_with model: @message do |f| %>
         <%= f.text_field :message, placeholder: "メッセージを入力して下さい", class: "col-10 form-control form-control-lg my-5 mx-auto" %>
            <%= f.hidden_field :room_id, value: @room.id %>
              <%= f.submit "投稿",class: 'form-submit btn btn-lg btn-success col-4'%>
      <% end %>
    </div>

    <%= link_to "マイページに戻る", user_path(current_user), class: "btn btn-secondary text-light decoration-none mx-auto my-3" %>
  </div>
 </div>